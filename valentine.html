<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MJ-Lab | The Love Logic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        html, body { 
            height: 100%; margin: 0; padding: 0; overflow: hidden; 
            background-color: #fff1f2; touch-action: none; 
        }
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif;
            transition: background-color 1.2s ease;
            display: flex; align-items: center; justify-content: center;
        }
        button { touch-action: manipulation; }
        .particle { position: absolute; pointer-events: none; animation: floatUp 8s linear infinite; opacity: 0.3; }
        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            50% { opacity: 0.6; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }
        .photo-stack { position: relative; width: 240px; height: 320px; margin: 0 auto; z-index: 10; }
        .stacked-photo {
            position: absolute; width: 100%; height: 100%;
            background: white; padding: 10px 10px 50px 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-radius: 8px; cursor: pointer;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1), opacity 0.5s;
        }
        .stacked-photo img { width: 100%; height: 100%; object-fit: cover; border-radius: 4px; }
        .photo-caption { position: absolute; bottom: 12px; left: 0; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: #f43f5e; }
        .photo-out { transform: translate(160%, -20%) rotate(35deg) scale(0.5) !important; opacity: 0; pointer-events: none; }
        #btn-area { position: relative; width: 100%; height: 280px; margin-top: 1rem; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #yes-btn { z-index: 100; transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #no-btn { background-color: #e2e8f0; color: #475569; transition: left 0.3s ease-out, top 0.3s ease-out; position: absolute; z-index: 40; }
        .heart-widget { width: 120px; height: 120px; margin: 0 auto; cursor: pointer; }
        .heart-fill-path { fill: #f43f5e; transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .hidden-section { display: none; }
        .section-fade { animation: fadeIn 0.6s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        input[type="text"] { font-size: 16px !important; }
        .typing::after { content: '|'; animation: blink 0.7s infinite; color: #f43f5e; }
        @keyframes blink { 50% { opacity: 0; } }
        
        /* ‡∏ã‡πà‡∏≠‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ YouTube */
        #youtube-player { position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none; }
    </style>
</head>
<body>
    <div id="youtube-player"></div>

    <div id="particles-bg"></div>
    <div id="main-container" class="bg-white/95 backdrop-blur-sm p-8 md:p-12 rounded-[2rem] shadow-2xl max-w-[90%] w-[400px] text-center relative z-50 border border-white">
        <div id="display-icon" class="text-4xl mb-6">üéÅ</div>

        <div id="section-decoder" class="section-fade">
            <h1 class="text-2xl text-slate-800 mb-1 font-bold">System Locked</h1>
            <p class="text-slate-400 text-[10px] mb-6 font-bold uppercase tracking-widest">‡∏Ç‡∏≠‡∏£‡∏´‡∏±‡∏™ digital door lock xxxxxx</p>
            <input type="text" id="passcode" placeholder="------" maxlength="6" class="bg-slate-100 border-none rounded-xl px-4 py-3 text-center text-rose-500 text-2xl font-bold tracking-[0.6em] w-full mb-6 focus:ring-2 focus:ring-rose-300">
            <button onclick="checkCode()" class="w-full bg-slate-900 text-white py-4 rounded-xl font-bold uppercase text-xs tracking-widest active:scale-95 transition-transform">Authorize</button>
        </div>

        <div id="section-charge" class="hidden-section section-fade">
            <h2 class="text-xl text-slate-800 mb-4 font-bold">how much do you love me today?</h2>
            <div class="heart-widget mb-6" onclick="chargeHeart()">
                <svg class="w-full h-full" viewBox="0 0 32 32">
                    <defs><clipPath id="heartClip"><rect id="fillLevel" x="0" y="32" width="32" height="32" /></clipPath></defs>
                    <path fill="#f1f5f9" d="M16 28.5L14.1 26.6C7.3 20.5 2.8 16.4 2.8 11.4C2.8 7.3 6 4.1 10.1 4.1C12.4 4.1 14.6 5.2 16 7C17.4 5.2 19.6 4.1 21.9 4.1C26 4.1 29.2 7.3 29.2 11.4C29.2 16.4 24.7 20.5 17.9 26.6L16 28.5Z"/>
                    <path class="heart-fill-path" clip-path="url(#heartClip)" d="M16 28.5L14.1 26.6C7.3 20.5 2.8 16.4 2.8 11.4C2.8 7.3 6 4.1 10.1 4.1C12.4 4.1 14.6 5.2 16 7C17.4 5.2 19.6 4.1 21.9 4.1C26 4.1 29.2 7.3 29.2 11.4C29.2 16.4 24.7 20.5 17.9 26.6L16 28.5Z"/>
                </svg>
            </div>
            <div id="charge-percent" class="text-3xl font-black text-slate-300 mb-6">0%</div>
            <button id="charge-next-btn" onclick="goToQuestions()" class="w-full bg-slate-200 text-slate-400 py-3 rounded-xl font-bold uppercase text-xs disabled:cursor-not-allowed" disabled>‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏±‡∏ß‡πÉ‡∏à</button>
        </div>

        <div id="section-questions" class="hidden-section section-fade">
            <p id="status-msg" class="text-[9px] text-rose-500 font-bold mb-4 uppercase tracking-tighter"></p>
            <h2 id="question-text" class="text-xl text-slate-700 min-h-[4rem] flex items-center justify-center font-bold px-2"></h2>
            <div id="btn-area">
                <button id="yes-btn" onclick="handleYes()" class="bg-rose-500 text-white px-8 py-3 rounded-full text-lg shadow-lg hover:bg-rose-600 active:scale-90 transition-all font-bold">YES</button>
                <button id="no-btn" class="px-6 py-2 rounded-full text-sm">NO</button>
            </div>
        </div>

        <div id="section-random" class="hidden-section section-fade"><h2 class="text-xl mb-6 font-bold">Everywhere with you is my favorite place</h2><div id="stack-random" class="photo-stack"></div></div>
        <div id="section-food" class="hidden-section section-fade"><h2 class="text-xl mb-6 font-bold">1% food and 99% of my love</h2><div id="stack-food" class="photo-stack"></div></div>

        <div id="section-card" class="hidden-section section-fade">
            <div class="text-rose-500 text-3xl mb-4">üíå</div>
            <h3 class="text-2xl text-slate-800 mb-6 font-bold">Hi, favorite person.</h3>
            <div id="typing-container" class="space-y-3 text-slate-600 text-[15px] font-medium italic leading-relaxed text-left">
                <p id="type-p1"></p><p id="type-p2"></p><p id="type-p3"></p>
            </div>
            <button id="final-cta" onclick="finalize()" class="mt-8 bg-rose-500 text-white px-10 py-3 rounded-full font-bold shadow-xl opacity-0 transition-opacity">THE END ‚ù§Ô∏è</button>
        </div>

        <div id="section-finale" class="hidden-section section-fade">
            <svg class="w-24 h-24 finale-heart mx-auto mb-6" viewBox="0 0 100 100">
                <path fill="#f43f5e" d="M92.71,7.27c-9.71-9.69-25.46-9.69-35.18,0L50,14.79l-7.53-7.52C32.75-2.42,17-2.42,7.29,7.27 c-9.71,9.69-9.71,25.41,0,35.1L50,85l42.71-42.63C102.43,32.68,102.43,16.96,92.71,7.27z"/>
            </svg>
            <h1 class="text-3xl text-rose-600 mb-2 font-bold">COMPLETE!</h1>
            <p class="text-slate-400 font-bold tracking-[0.2em] text-[10px] uppercase">Happy Valentine's Day</p>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        // --- YouTube Music Setup ---
        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '0',
                width: '0',
                videoId: 'U-fXJ6uNid8', // ID ‡πÄ‡∏û‡∏•‡∏á‡∏£‡∏±‡∏Å - Three Man Down
                playerVars: {
                    'autoplay': 0,
                    'controls': 0,
                    'loop': 1,
                    'playlist': 'U-fXJ6uNid8'
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }
        function onPlayerReady(event) {
            // Player ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
        }

        const randomCaptions = ["‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏´‡∏ô‡πÄ‡∏ô‡∏µ‡πà‡∏¢ üöó", "‡πÑ‡∏õ‡∏î‡∏π‡πÇ‡∏Ç‡∏ô ‡∏ä‡∏≠‡∏ö‡∏°‡∏≤‡∏Å üé≠", "‡∏ä‡∏≠‡∏ö‡∏ó‡∏∞‡πÄ‡∏• üåä", "‡πÑ‡∏õ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ üõí", "‡πÑ‡∏õ‡πÇ‡∏¢‡∏ô‡πÜ‡∏´‡∏•‡∏≤‡∏¢‡πÜ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏¢ üé¢", "‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏ô‡∏î‡∏π‡∏ú‡∏°‡∏û‡∏µ‡πà üå≥", "‡∏ä‡∏≠‡∏ö‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ üå∏", "‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏≠‡∏µ‡∏Å‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞ ‚úàÔ∏è", "‡πÑ‡∏õ‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢ üö≤", "‡πÑ‡∏õ‡∏Å‡∏¥‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏£‡πà‡∏≠‡∏¢ ü•©"];
        const foodCaptions = ["‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÄ‡∏ö‡∏ö‡∏µ‡πã üçì", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏≠‡∏ö‡πÅ‡∏ã‡∏•‡∏°‡πà‡∏≠‡∏ô üç±", "‡πÄ‡∏õ‡πà‡∏≤‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ó‡∏≥‡πÄ‡∏≠‡∏á‡∏ô‡∏∞ üéÇ", "‡∏õ‡∏•‡∏≤‡∏Æ‡∏≠‡∏Å‡πÄ‡∏Å‡∏∞‡∏Å‡∏±‡∏ö‡∏ó‡∏∞‡πÄ‡∏• üêü", "‡∏ä‡∏≤‡∏ö‡∏π‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏≠‡∏£‡πà‡∏≠‡∏¢ üç≤", "‡∏Å‡∏∏‡πâ‡∏á‡∏î‡∏≠‡∏á ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡πÅ‡∏ã‡πà‡∏ö üå∂Ô∏è", "‡∏£‡∏ß‡∏°‡πÄ‡∏ã‡∏ï‡πÄ‡∏°‡∏ô‡∏π‡∏û‡∏∏‡∏á‡∏Å‡∏≤‡∏á üòã", "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠ ‡∏¢‡∏≥‡∏°‡πà‡∏≠‡∏ô ‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å ü•ò", "‡∏ï‡∏≥‡πÅ‡∏ï‡∏á‡∏Å‡πá‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡∏î ü•ó", "‡∏°‡πà‡∏≠‡∏ô‡∏î‡∏≠‡∏á‡∏Å‡πá‡∏î‡πâ‡∏ß‡∏¢ ‡∏≠‡∏£‡πà‡∏≠‡∏¢‡∏™‡∏∏‡∏î‡πÜ üç£"];
        const questions = ["‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏ï‡∏≤‡∏°‡πÉ‡∏à‡∏´‡∏ô‡∏π‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏∂‡∏õ‡πà‡∏≤‡∏ß? ‚ú®", "‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡∏π‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏´‡∏°? üí≠", "‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏á‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞? üòá", "‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏û‡∏≤‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ‡πÜ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞? üó∫Ô∏è", "‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏û‡∏≤‡πÑ‡∏õ‡πÅ‡∏°‡∏Ñ‡πÇ‡∏Ñ‡∏£‡∏ö‡πà‡∏≠‡∏¢‡πÜ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏∞? üõí", "‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏π‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏ô‡πÑ‡∏´‡∏°? üç≥", "‡∏û‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏•‡∏∑‡∏°‡∏Å‡∏≠‡∏î‡πÜ‡∏´‡∏ô‡∏π‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤‡πÄ‡∏¢‡πá‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≠‡∏ô? ü´Ç", "‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏±‡∏Å‡πÜ‡∏´‡∏ô‡∏π‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ‡πÜ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏¢? ‚ù§Ô∏è"];
        
        let currentStep = 0; let yesScale = 1; let heartCharge = 0;

        function createParticles() {
            const container = document.getElementById('particles-bg');
            const icons = ['‚ù§Ô∏è', '‚ú®', 'üå∏'];
            for(let i=0; i<15; i++) {
                const p = document.createElement('div');
                p.className = 'particle'; p.innerText = icons[Math.floor(Math.random()*icons.length)];
                p.style.left = Math.random() * 100 + 'vw';
                p.style.animationDelay = (Math.random() * 5) + 's';
                container.appendChild(p);
            }
        }
        createParticles();

        function transition(from, to, bgColor) {
            document.getElementById(from).classList.add('hidden-section');
            document.getElementById(to).classList.remove('hidden-section');
            if(bgColor) document.body.style.backgroundColor = bgColor;
            if(to === 'section-card') startTyping();
        }

        function checkCode() {
            if (document.getElementById('passcode').value === '35250*') {
                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (User Interaction)
                if (player && player.playVideo) {
                    player.playVideo();
                }
                transition('section-decoder', 'section-charge');
            } else { alert("Code: 35250*"); }
        }

        function chargeHeart() {
            if (heartCharge < 100) {
                heartCharge += 10;
                document.getElementById('fillLevel').setAttribute('y', 32 - (32 * (heartCharge / 100)));
                const ct = document.getElementById('charge-percent');
                ct.innerText = `${heartCharge}%`; ct.style.color = `rgba(244, 63, 94, ${0.3 + (heartCharge/100)})`;
                if (heartCharge === 100) {
                    confetti({ particleCount: 40, spread: 70, origin: { y: 0.7 } });
                    const nb = document.getElementById('charge-next-btn');
                    nb.disabled = false; nb.innerText = "Authorize Access";
                    nb.classList.remove('bg-slate-200', 'text-slate-400');
                    nb.classList.add('bg-slate-900', 'text-white');
                }
            }
        }

        function goToQuestions() { transition('section-charge', 'section-questions'); updateQuestion(); }

        function updateQuestion() {
            if (currentStep < questions.length) {
                document.getElementById('status-msg').innerText = `Sequence ${currentStep + 1} of 8`;
                document.getElementById('question-text').innerText = questions[currentStep];
                resetButtons();
            } else {
                transition('section-questions', 'section-random', '#fafaf9');
                generateStack('random', 10, randomCaptions);
            }
        }

        function handleYes() { confetti({ particleCount: 20, spread: 50, origin: { y: 0.8 } }); currentStep++; updateQuestion(); }

        function resetButtons() {
            yesScale = 1;
            const yb = document.getElementById('yes-btn'); const nb = document.getElementById('no-btn');
            yb.style.transform = `scale(${yesScale})`;
            nb.style.position = "static"; nb.style.marginTop = "20px";
        }

        const noBtn = document.getElementById('no-btn');
        const yesBtn = document.getElementById('yes-btn');
        const btnArea = document.getElementById('btn-area');

        ['mouseover', 'touchstart'].forEach(evt => {
            noBtn.addEventListener(evt, function(e) {
                if(evt === 'touchstart') e.preventDefault();
                if (yesScale < 1.8) { yesScale += 0.15; yesBtn.style.transform = `scale(${yesScale})`; }
                const area = btnArea.getBoundingClientRect();
                const yesR = yesBtn.getBoundingClientRect();
                const btnW = noBtn.offsetWidth; const btnH = noBtn.offsetHeight;
                let newX, newY, isOver, attempts = 0;
                do {
                    newX = Math.random() * (area.width - btnW);
                    newY = Math.random() * (area.height - btnH);
                    const noR = { left: area.left + newX, right: area.left + newX + btnW, top: area.top + newY, bottom: area.top + newY + btnH };
                    isOver = !(noR.right < yesR.left - 10 || noR.left > yesR.right + 10 || noR.bottom < yesR.top - 10 || noR.top > yesR.bottom + 10);
                    attempts++;
                } while (isOver && attempts < 30);
                noBtn.style.position = "absolute"; noBtn.style.marginTop = "0";
                noBtn.style.left = `${newX}px`; noBtn.style.top = `${newY}px`;
            });
        });

        function startTyping() {
            const line1 = "‡πÄ‡∏¢‡πâ ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÜ ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞ ‚ú® ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÜ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ üíñ";
            const line2 = "‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏π‡∏ó‡∏≥‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞ üç≥ ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡∏î‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ ‚úåÔ∏è";
            const line3 = "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à love logic ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ ‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ‡∏ô‡∏∞‡∏Ñ‡∏∞ ü•∞";
            typeText('type-p1', line1, 50, () => {
                setTimeout(() => { 
                    typeText('type-p2', line2, 50, () => {
                        setTimeout(() => {
                            typeText('type-p3', line3, 50, () => {
                                document.getElementById('final-cta').classList.remove('opacity-0');
                            });
                        }, 400);
                    }); 
                }, 400);
            });
        }

        function typeText(id, text, speed, cb) {
            let i = 0; const el = document.getElementById(id);
            el.classList.add('typing');
            function t() {
                if (i < text.length) { el.innerHTML += text.charAt(i); i++; setTimeout(t, speed); }
                else { el.classList.remove('typing'); if(cb) cb(); }
            }
            t();
        }

        function generateStack(type, count, caps) {
            const container = document.getElementById(type === 'random' ? 'stack-random' : 'stack-food');
            container.innerHTML = ''; let rem = count;
            for(let i = 0; i < count; i++) {
                const div = document.createElement('div');
                div.className = 'stacked-photo'; div.style.zIndex = count - i;
                div.style.transform = `rotate(${(Math.random() - 0.5) * 15}deg) translateY(${i*-1}px)`;
                div.innerHTML = `<img src="${type}${i+1}.jpg" onerror="this.src='https://via.placeholder.com/200x260/f8fafc/f43f5e?text=${type}+${i+1}'"><div class="photo-caption">${caps[i]}</div>`;
                div.onclick = function() {
                    this.classList.add('photo-out'); rem--;
                    if(rem === 0) setTimeout(() => {
                        if(type === 'random') { transition('section-random', 'section-food', '#f0fdf4'); generateStack('food', 10, foodCaptions); }
                        else transition('section-food', 'section-card', '#fff1f2');
                    }, 600);
                };
                container.appendChild(div);
            }
        }

        function finalize() {
            transition('section-card', 'section-finale');
            const end = Date.now() + 5000;
            (function frame() {
                confetti({ particleCount: 3, angle: 60, spread: 55, origin: { x: 0, y: 0.8 } });
                confetti({ particleCount: 3, angle: 120, spread: 55, origin: { x: 1, y: 0.8 } });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }
    </script>
</body>
</html>
